
<meta charset="UTF-8"/>

<style>li {cursor: pointer;}</style>

<body>

<ul id=files_list style="float: left; padding: 24px;">
</ul>

<div id=editor_div>
	<input type=button value=SAVE onclick="javascript: studio . store_edited_file ('file_name', 'editor');" />
	<input type=text id=file_name size=64 onkeydown="javascript: resolutionCommand (this . value, event);"/>
	<input type=button value=ERASE onclick="javascript: studio . erase_file (document . getElementById ('file_name') . value);" />
	<input type=button value=COMMAND onclick="javascript: resolutionCommand (document . getElementById ('file_name') . value);" />
	<br />
	<textarea id=editor cols=100 rows=24 onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}">
	</textarea>
</div>

<script src="studio.js" type="text/javascript" charset="UTF-8"></script>
<script src="prolog.js" type="text/javascript" charset="UTF-8"></script>
<script src="studio.prc.js" type="text/javascript" charset="UTF-8"></script>
<script src="test.prc.js" type="text/javascript" charset="UTF-8"></script>
<script src="test.prb.js" type="text/javascript" charset="UTF-8"></script>
<script src="test_studio.prb.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
	studio . setResource (['sonda', 123, 'mariner'], "Joker was here!");
	studio . setResource (['sonda', 123, 'mariner.prc'], "JOKER");
</script>

<script type="text/javascript" charset="UTF-8">
	studio . search ('test_scripts');
	studio . cd (['test']);
	root = new prolog.Root();
	console . log ('test', root . load ('test'));
	console . log ('capitol', root . load ('capitol'));
	function resolutionCommand (command, e) {
		if (e !== undefined && e . key !== 'Enter') return;
		console . log (root . textResolution (command));
	};
	//root . auto_atoms = true;
	//resolutionCommand ("[* [batch 'test.prb']]");
	function res (command) {
		command = root . res ('[[' + command + ']' + command + ']');
		if (command === null) {console . log ("Doesn't work."); return false;}
		command = root . getValue (command . left);
		command = command . substring (1, command . length - 1);
		console . log (command);
		return true;
	};
</script>

<script type="text/javascript" charset="UTF-8">

refresh_file_tree = function (files_list, editor, location) {
	var getFunction = function (id) {return function () {studio . edit_file (id, editor, location);}};
	var ul = document . getElementById (files_list);
	while (ul . firstChild) {ul . removeChild (ul . firstChild);}
	var collection = [];
	for (var ind = 0; ind < localStorage . length; ind++) collection . push (localStorage . key (ind));
	collection . sort ();
	for (var ind in collection) {
		var li = document . createElement ('li');
		li . innerHTML = collection [ind];
		li . onclick = getFunction (collection [ind]);
		ul . appendChild (li);
	}
};

(studio . callback = function () {refresh_file_tree ('files_list', 'editor', 'file_name');}) ();


</script>


</body>
